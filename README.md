![C++ Badge](https://img.shields.io/badge/C%2B%2B-00599C?logo=cplusplus&logoColor=fff&style=plastic)
![PlatformIO Badge](https://img.shields.io/badge/build%20with-PlatformIO-orange?logo=data%3Aimage%2Fsvg%2Bxml%3Bbase64%2CPHN2ZyB3aWR0aD0iMjUwMCIgaGVpZ2h0PSIyNTAwIiB2aWV3Qm94PSIwIDAgMjU2IDI1NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJ4TWlkWU1pZCI+PHBhdGggZD0iTTEyOCAwQzkzLjgxIDAgNjEuNjY2IDEzLjMxNCAzNy40OSAzNy40OSAxMy4zMTQgNjEuNjY2IDAgOTMuODEgMCAxMjhjMCAzNC4xOSAxMy4zMTQgNjYuMzM0IDM3LjQ5IDkwLjUxQzYxLjY2NiAyNDIuNjg2IDkzLjgxIDI1NiAxMjggMjU2YzM0LjE5IDAgNjYuMzM0LTEzLjMxNCA5MC41MS0zNy40OUMyNDIuNjg2IDE5NC4zMzQgMjU2IDE2Mi4xOSAyNTYgMTI4YzAtMzQuMTktMTMuMzE0LTY2LjMzNC0zNy40OS05MC41MUMxOTQuMzM0IDEzLjMxNCAxNjIuMTkgMCAxMjggMCIgZmlsbD0iI0ZGN0YwMCIvPjxwYXRoIGQ9Ik0yNDkuMzg2IDEyOGMwIDY3LjA0LTU0LjM0NyAxMjEuMzg2LTEyMS4zODYgMTIxLjM4NkM2MC45NiAyNDkuMzg2IDYuNjEzIDE5NS4wNCA2LjYxMyAxMjggNi42MTMgNjAuOTYgNjAuOTYgNi42MTQgMTI4IDYuNjE0YzY3LjA0IDAgMTIxLjM4NiA1NC4zNDYgMTIxLjM4NiAxMjEuMzg2IiBmaWxsPSIjRkZGIi8+PHBhdGggZD0iTTE2MC44NjkgNzQuMDYybDUuMTQ1LTE4LjUzN2M1LjI2NC0uNDcgOS4zOTItNC44ODYgOS4zOTItMTAuMjczIDAtNS43LTQuNjItMTAuMzItMTAuMzItMTAuMzJzLTEwLjMyIDQuNjItMTAuMzIgMTAuMzJjMCAzLjc1NSAyLjAxMyA3LjAzIDUuMDEgOC44MzdsLTUuMDUgMTguMTk1Yy0xNC40MzctMy42Ny0yNi42MjUtMy4zOS0yNi42MjUtMy4zOWwtMi4yNTggMS4wMXYxNDAuODcybDIuMjU4Ljc1M2MxMy42MTQgMCA3My4xNzctNDEuMTMzIDczLjMyMy04NS4yNyAwLTMxLjYyNC0yMS4wMjMtNDUuODI1LTQwLjU1NS01Mi4xOTd6TTE0Ni41MyAxNjQuOGMtMTEuNjE3LTE4LjU1Ny02LjcwNi02MS43NTEgMjMuNjQzLTY3LjkyNSA4LjMyLTEuMzMzIDE4LjUwOSA0LjEzNCAyMS41MSAxNi4yNzkgNy41ODIgMjUuNzY2LTM3LjAxNSA2MS44NDUtNDUuMTUzIDUxLjY0NnptMTguMjE2LTM5Ljc1MmE5LjM5OSA5LjM5OSAwIDAgMC05LjM5OSA5LjM5OSA5LjM5OSA5LjM5OSAwIDAgMCA5LjQgOS4zOTkgOS4zOTkgOS4zOTkgMCAwIDAgOS4zOTgtOS40IDkuMzk5IDkuMzk5IDAgMCAwLTkuMzk5LTkuMzk4em0yLjgxIDguNjcyYTIuMzc0IDIuMzc0IDAgMSAxIDAtNC43NDkgMi4zNzQgMi4zNzQgMCAwIDEgMCA0Ljc0OXoiIGZpbGw9IiNFNTcyMDAiLz48cGF0aCBkPSJNMTAxLjM3MSA3Mi43MDlsLTUuMDIzLTE4LjkwMWMyLjg3NC0xLjgzMiA0Ljc4Ni01LjA0IDQuNzg2LTguNzAxIDAtNS43LTQuNjItMTAuMzItMTAuMzItMTAuMzItNS42OTkgMC0xMC4zMTkgNC42Mi0xMC4zMTkgMTAuMzIgMCA1LjY4MiA0LjU5MiAxMC4yODkgMTAuMjY3IDEwLjMxN0w5NS44IDc0LjM3OGMtMTkuNjA5IDYuNTEtNDAuODg1IDIwLjc0Mi00MC44ODUgNTEuODguNDM2IDQ1LjAxIDU5LjU3MiA4NS4yNjcgNzMuMTg2IDg1LjI2N1Y2OC44OTJzLTEyLjI1Mi0uMDYyLTI2LjcyOSAzLjgxN3ptMTAuMzk1IDkyLjA5Yy04LjEzOCAxMC4yLTUyLjczNS0yNS44OC00NS4xNTQtNTEuNjQ1IDMuMDAyLTEyLjE0NSAxMy4xOS0xNy42MTIgMjEuNTExLTE2LjI4IDMwLjM1IDYuMTc1IDM1LjI2IDQ5LjM2OSAyMy42NDMgNjcuOTI2em0tMTguODItMzkuNDZhOS4zOTkgOS4zOTkgMCAwIDAtOS4zOTkgOS4zOTggOS4zOTkgOS4zOTkgMCAwIDAgOS40IDkuNCA5LjM5OSA5LjM5OSAwIDAgMCA5LjM5OC05LjQgOS4zOTkgOS4zOTkgMCAwIDAtOS4zOTktOS4zOTl6bS0yLjgxIDguNjcxYTIuMzc0IDIuMzc0IDAgMSAxIDAtNC43NDggMi4zNzQgMi4zNzQgMCAwIDEgMCA0Ljc0OHoiIGZpbGw9IiNGRjdGMDAiLz48L3N2Zz4=)

# Carte Aiguille LocoNet

- [La flamme olympique 2024](#La-flamme-olympique-2024)
- [Le projet Flamme Olympique Connecté](#Le-projet-Flamme-Olympique-Connecté-avec-véhicule-suiveur)
- [Réplique de la Flamme](#Réplique-de-la-Flamme)

Dans un réseau de train miniature, il devient rapidement nessaisaire de controler c'est aiguillage avec l'aide d'une centrale numérique du commerce.

## Synoptique



### Matériel
- Microcontrôleur ATmega328 (ou une carte Arduino compatible)
- Servomoteurs pour aiguillages
- Système Loconet pour la communication
- LEDs pour l'indication de position, de données et d'erreur
- Boutons avec résistances de pull-up pour les entrées de détection

### Logicielle
- Microcontrôleur ATmega328 (ou une carte Arduino compatible)
- Servomoteurs pour aiguillages
- Système Loconet pour la communication
- LEDs pour l'indication de position, de données et d'erreur
- Boutons avec résistances de pull-up pour les entrées de détection

### Installation et Configuration
Le menu est contrôlé par une série de commandes qui permettent à l'utilisateur de naviguer à travers les options de configuration et de voir les réglages actuels. Voici les commandes disponibles et leur effet :

- **R** : Voir les réglages actuels de la carte.
- **M** : Régler le point milieu du servo-moteur.
- **P** : Régler la fin de course gauche et droite du servo.
- **A** : Régler l'adresse de commande de l'aiguillage.
- **D** : Régler l'adresse de détection.
- **N** : Régler le nombre de moteurs d'aiguillage.
- **S** : Régler le sens logique du moteur d'aiguillage.
- **I** : Isoler la carte.
- **E** : Quitter le mode de configuration.
- **?** : Afficher le menu d'aide.

Pour utiliser ces commandes, entrez la lettre correspondante et appuyez sur 'Entrée'. Le système répondra en fonction de la commande entrée et vous dirigera vers le menu ou l'action appropriée.

## Revue Technique

Ce projet utilise un microcontrôleur ATmega328 pour la gestion des aiguillages d'un réseau de modélisme ferroviaire. Il intègre des servomoteurs pour les aiguillages, le protocole Loconet pour la communication, et fournit des retours visuels via des LEDs.

### Brochage des Pins

<img src="images/pin%20atmega328p.jpg" alt="Brochage des pins ATmega328" width="400" height="400">


| GPIO   | PIN  | Fonction                          |
|--------|------|-----------------------------------|
| GPIO 9 | 13   | Servo 1                           |
| GPIO 10| 14   | Servo 2 (fonctionnalité en cours) |
| GPIO 7 | 11   | LocoNet TX                        |
| GPIO 8 | 12   | LocoNet RX                        |
| GPIO 5 | 9    | Relais                            |
| GPIO 2 | 1    | Pull-UP 1                         |
| GPIO 3 | 32   | Pull-UP 2                         |
| GPIO 16| 25   | LED position aiguillage           |
| GPIO 17| 26   | LED DATA                          |
| GPIO 18| 27   | LED ERREUR                        |

## Installation
Assemblez le matériel selon le schéma de câblage.
Téléchargez le code source dans le microcontrôleur.
Configurez les paramètres initiaux via les menus série.

## Utilisation
Après le démarrage, le système exécute une routine de configuration et entre dans une boucle principale où il écoute les événements Loconet et les entrées de détection. Utilisez le menu série pour faire des ajustements.

## Contribution
Les contributions à ce projet sont les bienvenues. Veuillez soumettre vos pull requests pour examen.

## Licence
Ce projet est sous licence MIT.

## Auteurs
MARTIN Mathis
